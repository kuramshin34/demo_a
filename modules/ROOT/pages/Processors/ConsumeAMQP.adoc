= ConsumeAMQP 2.2.0

Потребляет сообщения AMQP из брокера AMQP с использованием протокола AMQP 0.9.1. Каждое полученное сообщение будет выпущено как отдельный FlowFile в отношение 'success'.

[horizontal]
*Tags* (Ключевые слова):
amqp, consume, get, message, rabbit, receive
[horizontal]
*Input Requirement* (Требования к вводу данных):
FORBIDDEN
[horizontal]
*Supports Sensitive Dynamic* (Поддержка динамически изменяемых параметров, которые могут содержать конфиденциальную информацию):
 False (Нет) 



== Properties (Свойства)


.*Queue*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Queue (Очередь)

[horizontal]
*DESCRIPTION (Описание):*:: Имя существующей очереди AMQP, из которой будут потребляться сообщения. Обычно определяется администратором AMQP. 


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Auto.Acknowledge
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Auto-Acknowledge Messages (Автоматическое подтверждение сообщений)

[horizontal]
*DESCRIPTION (Описание):*:: Если значение равно false (Неавтоматическое подтверждение), сообщения будут подтверждены процессором после передачи FlowFiles в успешную и завершения сессии NiFi. Неавтоматическое подтверждение обеспечивает семантику 'по крайней мере один раз'. Если значение равно true (Автоматическое подтверждение), сообщения, доставленные к AMQP Клиенту, будут автоматически подтверждены брокером AMQP сразу после их отправки. Это обычно обеспечивает лучшую пропускную способность, но также приведет к потере сообщений при перезапуске/сбое брокера AMQP, NiFi или процессора. Автоматическое подтверждение обеспечивает семантику 'по крайней мере один раз' и рекомендуется только в том случае, если потеря сообщений является приемлемой.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: 
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.*Batch.Size*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Batch Size (Размер партии)

[horizontal]
*DESCRIPTION (Описание):*:: Максимальное количество сообщений, которые должны быть обработаны в одной сессии. Как только будет получено это число сообщений (или пока не будет доступно больше сообщений), принятые сообщения будут переданы в отношение 'успех', и сообщения будут подтверждены брокеру AMQP. Увеличение этого значения может повысить производительность, особенно для очень маленьких сообщений, но также может привести к дублированию большего количества сообщений при внезапном перезапуске NiFi.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Prefetch.Count*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Prefetch Count (Максимальное количество неподтвержденных сообщений для потребителя)

[horizontal]
*DESCRIPTION (Описание):*:: Максимальное количество неподтвержденных сообщений для потребителя. Если у потребителя такое количество неподтвержденных сообщений, брокер AMQP перестанет отправлять новые сообщения до тех пор, пока потребитель не подтвердит некоторое из уже доставленных ему сообщений. Допустимые значения: от 0 до 65535. Значение 0 означает отсутствие ограничений


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Header.Format*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Header Output Format (Формат вывода заголовков)

[horizontal]
*DESCRIPTION (Описание):*:: Определяет, как выводить заголовки из полученного сообщения


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* Comma-Separated String (Строка с разделителем): Поместите все заголовки в виде строки с указанным разделителем в атрибут 'amqp$headers'. 

* JSON String (Строка JSON): Отформатируйте все заголовки как строку JSON и выведите в атрибут 'amqp$headers'. Включает ключи с нулевым значением. 

* FlowFile Attributes (Атрибуты FlowFile): Поместите каждый заголовок в виде атрибута потока файлов с указанным префиксом в свойствах 


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Header.Key.Prefix*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Header Key Prefix (Префикс ключа заголовка)

[horizontal]
*DESCRIPTION (Описание):*:: Текст, который будет добавляться к ключам заголовков при их добавлении в атрибуты FlowFile. Обработчик будет добавлять '.' к значению этого свойства


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Header.Separator
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Header Separator (Разделитель)

[horizontal]
*DESCRIPTION (Описание):*:: Символ, используемый для разделения ключа и значения в заголовке строки. Значение должно состоять только из одного символа.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Remove.Curly.Braces
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Remove Curly Braces (Удалить фигурные скобки)

[horizontal]
*DESCRIPTION (Описание):*:: Если true, удаляются фигурные скобки в заголовке.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* True

* False


[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Brokers
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Brokers (брокеры)

[horizontal]
*DESCRIPTION (Описание):*:: Список, разделенный запятыми известных AMQP брокеров в формате <хост>:<порт> (например, localhost:5672). Если это установлено, игнорируются Имя хоста и Порт. Включайте только хосты из одного AMQP кластера.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables defined at JVM level and system properties (Переменные окружения, определенные на уровне JVM и системных свойств)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Host Name
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Host Name (Имя хоста)

[horizontal]
*DESCRIPTION (Описание):*:: Сетевой адрес брокера AMQP (например, localhost). Если установлены Brokers, то это свойство игнорируется.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables defined at JVM level and system properties (Переменные окружения, определенные на уровне JVM и системных свойств)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Port
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Port (Порт)

[horizontal]
*DESCRIPTION (Описание):*:: Числовой идентификатор порта брокера AMQP (например, 5671). Если установлены брокеры, то это свойство игнорируется.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables defined at JVM level and system properties (Переменные окружения, определенные на уровне JVM и системных свойств)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Virtual Host
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Virtual Host (Виртуальный узел)

[horizontal]
*DESCRIPTION (Описание):*:: Имя виртуального узла, которое сегментирует AMQP систему для повышения безопасности.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables defined at JVM level and system properties (Переменные окружения, определенные на уровне JVM и системных свойств)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.User Name
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: User Name (Имя пользователя)

[horizontal]
*DESCRIPTION (Описание):*:: User Name используется для аутентификации и авторизации.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables defined at JVM level and system properties (Переменные окружения, определенные на уровне JVM и системных свойств)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Password
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Password (Пароль)

[horizontal]
*DESCRIPTION (Описание):*:: Пароль, используемый для аутентификации и авторизации.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  True (Да) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.*Amqp Version*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: AMQP Version (Версия AMQP)

[horizontal]
*DESCRIPTION (Описание):*:: Версия AMQP. В настоящее время поддерживается только версия AMQP v0.9.1.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* 0.9.1 (Версия 0.9.1)


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Ssl-Context-Service
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: SSL Context Service (SSL Контекст Сервис)

[horizontal]
*DESCRIPTION (Описание):*:: The SSL Context Service used to provide client certificate information for TLS/SSL connections. (Сервис контекста SSL, используемый для предоставления информации о клиентских сертификатах для подключений TLS/SSL.)


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Cert-Authentication
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Use Client Certificate Authentication (Использовать аутентификацию с помощью сертификата клиента)

[horizontal]
*DESCRIPTION (Описание):*:: Authenticate using the SSL certificate rather than user name/password.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* true

* false


[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************










=== Relationships (Связи)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`success`
|Все FlowFiles, полученные из очереди AMQP, направляются в это отношение

|===





=== Writes Attributes (Записываемые атрибуты)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`amqp$appId`
|Поле идентификатора приложения из AMQP Message

|`amqp$contentEncoding`
|Кодировка содержимого, отчетнуя в AMQP Message

|`amqp$contentType`
|Тип контента, отчетный в AMQP Message

|`amqp$headers`
|Заголовки, присутствующие в сообщении AMQP. Добавляются только если процессор настроен для вывода этого атрибута.

|`<Header Key Prefix>.<attribute>`
|Каждый заголовок сообщения будет вставлен с именем этого атрибута, если процессор настроен для вывода заголовков в виде атрибутов

|`amqp$deliveryMode`
|Числовой индикатор режима доставки сообщения

|`amqp$priority`
|Приоритет сообщения

|`amqp$correlationId`
|Идентификатор корреляции в сообщении

|`amqp$replyTo`
|Значение поля Reply-To в сообщении

|`amqp$expiration`
|Срок действия сообщения

|`amqp$messageId`
|Уникальный ID сообщения

|`amqp$timestamp`
|Метка времени сообщения, в миллисекундах с эпохи

|`amqp$type`
|Тип сообщения

|`amqp$userId`
|Идентификатор пользователя

|`amqp$clusterId`
|Идентификатор кластера AMQP

|`amqp$routingKey`
|Маршрутизационный ключ сообщения AMQP

|`amqp$exchange`
|Обмен, из которого получено сообщение AMQP

|===







