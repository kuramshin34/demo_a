= PutMongoRecord 2.2.0

Этот процессор является записывающим процессором для вставки/обновления данных в MongoDB. Он использует настроенного читателя записей и схему для чтения входящего набора записей из тела потока и затем вставляет/обновляет пакеты этих записей в настроенную коллекцию MongoDB. Этот процессор не поддерживает удаления. Количество документов, которые будут вставляться/обновляться за один раз, контролируется конфигурационным свойством "Batch Size". Это значение должно быть установлено в разумный размер, чтобы обеспечить, что MongoDB не перегружается слишком многими операциями одновременно.

[horizontal]
*Tags* (Ключевые слова):
insert, mongodb, put, record, update, upsert
[horizontal]
*Input Requirement* (Требования к вводу данных):
REQUIRED
[horizontal]
*Supports Sensitive Dynamic* (Поддержка динамически изменяемых параметров, которые могут содержать конфиденциальную информацию):
 False (Нет) 



== Properties (Свойства)


.Mongo-Client-Service
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Client Service (Клиент Сервис)

[horizontal]
*DESCRIPTION (Описание):*:: Если настроено, это свойство будет использовать назначенный клиентский сервис для пула соединений.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.*Mongo Database Name*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Mongo Database Name (Имя базы данных)

[horizontal]
*DESCRIPTION (Описание):*:: Имя базы данных, которую следует использовать


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Mongo Collection Name*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Mongo Collection Name (Имя коллекции)

[horizontal]
*DESCRIPTION (Описание):*:: Имя коллекции для использования


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Record-Reader*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Record Reader (Чтец записей)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает сервис контроллера для использования при разборе входящих данных и определении схемы данных


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Insert_Count*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Batch Size (Размер партии)

[horizontal]
*DESCRIPTION (Описание):*:: Количество записей, которые следует сгруппировать вместе для одной операции вставки/обновления в MongoDB.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Ordered*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Ordered (Выполнять упорядоченные или неупорядоченные операции)

[horizontal]
*DESCRIPTION (Описание):*:: Perform ordered or unordered operations


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* True (Истина)

* False (Ложь)


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Bypass-Validation*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Bypass Validation (Обход проверки схемы документов)

[horizontal]
*DESCRIPTION (Описание):*::         Включает или отключает обход проверки схемы документа во время операций вставки или обновления.
        Обход проверки документов является привилегированным действием в MongoDB.
        Включение этого свойства может привести к ошибкам авторизации для пользователей с ограниченными правами доступа.



[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* True

* False


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Update-Key-Fields
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Update Key Fields (Обновление полей ключей)

[horizontal]
*DESCRIPTION (Описание):*:: Список, разделенный запятыми, полей на основе которых идентифицируются документы, которые необходимо обновить. Если это свойство установлено, NiFi попытается выполнить операцию upsert для всех документов. Если это свойство не задано, будут вставлены все документы.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Update-Mode
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Update Mode (Режим обновления)

[horizontal]
*DESCRIPTION (Описание):*:: Выберите между обновлением одного документа или нескольких документов на основе входящего записи.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* Update One (Обновить Один): Обновляет только первый документ, соответствующий запросу. 

* Update Many (Обновить Многие): Обновляет каждый документ, соответствующий запросу. 

* Use 'mongodb.update.mode' FlowFile attribute (Использовать атрибут 'mongodb.update.mode' FlowFile): Используйте значение атрибута 'mongodb.update.mode' входящего FlowFile. Допустимые значения: 'one' и 'many'. 


[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************










=== Relationships (Связи)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`success`
|Все FlowFiles, записанные в MongoDB, направляются по этому отношению

|`failure`
|Все FlowFiles, которые не могут быть записаны в MongoDB, направляются по этому отношению

|===



=== Читаемые атрибуты

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`mongodb.update.mode`
|Настраиваемый параметр для управления режимом обновления на уровне потока. Принимаемые значения: 'one' и 'many', контролируя, должен ли один входящий запрос обновить один или несколько документов Mongo.

|===









