= SampleRecord 2.2.0

Примеры записей потока на основе указанной стратегии выборки (например, Выборочная выборка резервуара). Результирующий файл потока может быть фиксированным числом записей (в случае алгоритмов на основе резервуара) или некоторым подмножеством общего числа записей (в случае вероятностной выборки), или детерминированным числом записей (в случае интервальной выборки).

[horizontal]
*Tags* (Ключевые слова):
interval, range, record, reservoir, sample
[horizontal]
*Input Requirement* (Требования к вводу данных):
REQUIRED
[horizontal]
*Supports Sensitive Dynamic* (Поддержка динамически изменяемых параметров, которые могут содержать конфиденциальную информацию):
 False (Нет) 



== Properties (Свойства)


.*Record-Reader*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Record Reader (Чтец записей)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает сервис контроллера для использования при разборе входящих данных и определении схемы данных


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Record-Writer*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Record Writer (Записыватель записей)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает контроллер сервиса для использования при записи результатов в FlowFile


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Sample-Record-Sampling-Strategy*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Sampling Strategy (Стратегия выборки)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает, какой метод следует использовать для выборки записей из входящего потока


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* Interval Sampling (Выборка по интервалам): Выбирает каждую N-ую запись, где N — значение свойства 'Interval Value' 

* Range Sampling (Выборка по диапазону): Создаёт образец записей на основе индекса (то есть номера записи) используя указанный диапазон. Пример: '3,6-8,20-' включает третью запись, шестую, седьмую и восьмую записи, а также все записи от двадцатой записи. 

* Probabilistic Sampling (Вероятностная выборка): Выбирает каждую запись с вероятностью P, где P — значение свойства 'Selection Probability' 

* Reservoir Sampling (Выборка резервуара): Создаёт образец из K записей, где каждая запись имеет равную вероятность быть включённой, где K — значение свойства 'Reservoir Size'. Обратите внимание, что если значение очень велико, это может вызвать проблемы с памятью, так как резервуар хранится в памяти. 


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Sample-Record-Interval*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Sampling Interval (Интервал выборки)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает количество записей, которые нужно пропустить перед записью записи в исходящий FlowFile. Это свойство используется только если стратегия выборки установлена на интервальную выборку. Значение ноль (0) приведет к включению в исходящий FlowFile ни одной записи, значение один (1) приведет ко всем записям быть включенными, а значение два (2) приведет к включению половины записей и так далее.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Sample-Record-Range*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Sampling Range (Диапазон выборки)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает диапазон записей для включения в образец, от 1 до общего количества записей. Пример: '3,6-8,20-' включает третью запись, шестую, седьмую и восьмую записи и все записи с двадцатой записи. Запятые разделяют интервалы, которые не перекрываются, а интервал может быть между двумя числами (например, 6-8) или до заданного числа (например, -5), или от числа до последней записи (например, 20-). Если это свойство не установлено, будут включены все записи.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Sample-Record-Probability*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Sampling Probability (Вероятность выборки)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает вероятность (в процентах от 0 до 100) записи, включаемой в исходящий FlowFile. Это свойство используется только если стратегия выборки установлена в Пробит-выборку. Значение ноль (0) приведет к тому, что ни одна запись не будет включена в исходящий FlowFile, а значение 100 приведет ко всем записям, включаемым в исходящий FlowFile.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Sample-Record-Reservoir*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Reservoir Size (Размер резервуара)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает количество записей для записи в исходящий FlowFile. Это свойство используется только если Стратегия выборки установлена на стратегии на основе резервуара, такие как Выборочная выборка резервуара.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Sample-Record-Random-Seed
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Random Seed (Семя)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает конкретное число для использования в качестве семени для генератора случайных чисел (используется вероятностными стратегиями). Установка этого свойства обеспечит выбор одних и тех же записей даже при использовании вероятностных стратегий.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************






=== Системные ресурсы

[cols="1a,2a",options="header",]
|===
|Ресурс |Описание


|MEMORY
|Экземпляр этого компонента может вызвать высокое использование системного ресурса. Несколько экземпляров или высокие настройки конкоррентности могут привести к снижению производительности.

|===





=== Relationships (Связи)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`failure`
|Если FlowFile не обрабатывается по какой-либо причине (например, любая запись недействительна), исходный FlowFile будет направлен в это отношение

|`success`
|FlowFile направляется в это отношение, если выборка завершена успешно

|`original`
|Исходный FlowFile направляется в это отношение, если выборка успешна

|===





=== Writes Attributes (Записываемые атрибуты)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`mime.type`
|Тип MIME, указанный записывателем записей

|`record.count`
|Количество записей в результирующем файле потока

|===







