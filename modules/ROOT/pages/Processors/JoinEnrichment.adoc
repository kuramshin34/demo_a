= JoinEnrichment 2.2.0

Присоединяет записи из двух разных FlowFiles, где одна FlowFile, называемая 'оригинальной', содержит произвольные записи, а вторая FlowFile, называемая 'улучшением', содержит дополнительные данные, которые следует использовать для улучшения первой. См. Дополнительные сведения для получения более подробной информации о том, как настроить этот процессор и различных вариантах его применения.

[horizontal]
*Tags* (Ключевые слова):
combine, enrichment, fork, join, merge, record, recordpath, sql, streams, wrap
[horizontal]
*Input Requirement* (Требования к вводу данных):
REQUIRED
[horizontal]
*Supports Sensitive Dynamic* (Поддержка динамически изменяемых параметров, которые могут содержать конфиденциальную информацию):
 False (Нет) 



== Properties (Свойства)


.*Original Record Reader*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Original Record Reader (Оригинальный читатель записей)

[horizontal]
*DESCRIPTION (Описание):*:: The Record Reader for reading the 'original' FlowFile


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Enrichment Record Reader*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Enrichment Record Reader (Записыватель записей для чтения 'обогащения' FlowFile)

[horizontal]
*DESCRIPTION (Описание):*:: The Record Reader for reading the 'enrichment' FlowFile


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Record Writer*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Записыватель записей (Record Writer)

[horizontal]
*DESCRIPTION (Описание):*:: Записыватель, который следует использовать для записи результатов. Если записыватель настроен для наследования схемы от записи, схема, которую он будет наследовать, будет результатом объединения как исходной схемы записи, так и дополненной схемы записи.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Join Strategy*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Join Strategy (Стратегия объединения)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает, как объединить два FlowFile в один FlowFile


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* Wrapper (Оболочка): Выходом является Record, содержащий два поля: (1) 'original', содержащее Record из исходного FlowFile и (2) 'enrichment', содержащее соответствующее Record из обогащенного FlowFile. Записи будут коррелироваться на основе их индекса в FlowFile. Если один FlowFile содержит больше записей, чем другой, используется значение null. 

* SQL (SQL): Выходом является результат выполнения SQL SELECT-операции, которая позволяет использовать две таблицы: 'original' и 'enrichment'. Это позволяет использовать SQL JOIN для корреляции записей двух FlowFile, поэтому важен не индекс, в котором встречается запись в FlowFile. 

* Insert Enrichment Fields (Вставить обогащенные поля): Обогащение объединяется с исходным FlowFile путем помещения всех полей записи обогащения в соответствующую запись из исходного FlowFile. Записи будут коррелироваться на основе их индекса в FlowFile. 


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Sql*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: SQL (SQL)

[horizontal]
*DESCRIPTION (Описание):*:: Предложение SQL SELECT для оценки. Язык выражений может быть предоставлен, но это может привести к снижению производительности. Поскольку данный процессор обрабатывает два FlowFile одновременно, важно понять, как будут ссылаться атрибуты. Если оба FlowFile имеют атрибут с одинаковым именем, но разными значениями, язык выражений разрешит значение, предоставленное 'enrichment' FlowFile.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Dbf-Default-Precision
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Default Decimal Precision (По умолчанию точность десятичного числа)

[horizontal]
*DESCRIPTION (Описание):*:: Когда значение DECIMAL/NUMBER записывается как логический тип Avro 'decimal', требуется особая 'точность', обозначающая количество доступных цифр. Как правило, точность определяется определением типа данных столбца или значением по умолчанию движка базы данных. Однако неопределенная точность (0) может быть возвращена некоторыми движками баз данных. 'Default Decimal Precision' используется при записи таких чисел с неопределенной точностью.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Dbf-Default-Scale
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Default Decimal Scale (По умолчанию Десятичный Масштаб)

[horizontal]
*DESCRIPTION (Описание):*:: Когда значение DECIMAL/NUMBER, записанное как 'decimal' логический тип Avro, требуется определённый 'scale', обозначающий количество доступных десятичных цифр. Обычно масштаб определяется определением типа данных столбца или по умолчанию движка базы данных. Однако, когда возвращается неопределённая точность (0), масштаб также может быть неопределённым с некоторыми движками баз данных. 'Default Decimal Scale' используется при записи таких неопределённых чисел. Если значение имеет больше десятичных цифр, чем указанный масштаб, то значение будет округлено вверх, например, 1.53 станет 2 с масштабом 0, а 1.5 с масштабом 1.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.*Insertion Record Path*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Insertion Record Path (Путь вставки записи)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает, где в исходной записи следует вставить поля 'обогащенной' записи. Следует отметить, что если путь записи не указывает на существующее поле в исходной записи, обогащение не будет вставлено.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Maximum Number Of Bins*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Maximum number of Bins (Максимальное количество бакетов)

[horizontal]
*DESCRIPTION (Описание):*:: Specifies the maximum number of bins that can be held in memory at any one time


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*Timeout*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Timeout (Таймаут)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает максимальное количество времени для ожидания второго FlowFile после того, как первый прибывает на процессор, после чего первый FlowFile будет направлен в отношение 'timeout'.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************






=== Системные ресурсы

[cols="1a,2a",options="header",]
|===
|Ресурс |Описание


|MEMORY
|Этот процессор загрузит в кучу все FlowFiles, которые находятся в очереди входящих. Хотя он загружает сами FlowFiles, а не их содержимое, атрибуты FlowFile могут быть весьма памятными. Кроме того, если стратегия присоединения установлена в SQL, движок SQL может потребовать буферизации всего содержимого enrichment FlowFile для каждой задачи по контексту. См. Дополнительные сведения о процессоре для получения дополнительных сведений и шагов по снижению этих опасений.

|===





=== Relationships (Связи)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`failure`
|Если обе FlowFiles ('оригинальная' и 'улучшение') прибывают к процессору, но произошла ошибка при соединении записей, оба этих FlowFiles будут направлены в это отношение.

|`timeout`
|Если одна из входящих FlowFiles (т.е. 'оригинальная' FlowFile или 'улучшение' FlowFile) прибывает к этому процессору, но другая не прибывает в течение настроенного периода таймаута, поступивший FlowFile направляется в это отношение.

|`original`
|Обе входящие FlowFiles ('оригинальная' и 'улучшение') будут направлены в это отношение. То есть это исходная версия обеих этих FlowFiles.

|`joined`
|Результирующий FlowFile с объединенными записями из оригинальной и улучшающей FlowFiles будет направлен в это отношение.

|===





=== Writes Attributes (Записываемые атрибуты)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`mime.type`
|Устанавливает атрибут mime.type в указанный MIME-тип записывателя

|`record.count`
|Количество записей в FlowFile

|===







=== Смотрите также


* xref:Processors/ForkEnrichment.adoc[ForkEnrichment]


