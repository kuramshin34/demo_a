= GrokReader 2.2.0

Предоставляет механизм для чтения неупорядоченного текстового данного, такого как файлы журналов, и структурирования данных для дальнейшей обработки. Сервис настраивается с использованием шаблонов Grok. Сервис читает поток данных и разделяет каждое найденное сообщение на отдельную запись, каждая из которых содержит поля, настроенные в конфигурации. Если строка во входном тексте не соответствует ожидаемому шаблону сообщения, строка текста либо считается частью предыдущего сообщения, либо пропускается в зависимости от конфигурации, за исключением трассировок кода. Трассировка, найденная в конце сообщения журнала, считается частью предыдущего сообщения, но добавляется в поле 'stackTrace' записи. Если запись не имеет трассировки, она будет иметь значение NULL для поля stackTrace (предполагая, что схема действительно включает поле stackTrace типа String). Предполагая, что схема включает поле '_raw' типа String, исходное сообщение будет включено в запись.

[horizontal]
*Tags* (Ключевые слова):
grok, logfiles, logs, logstash, parse, pattern, reader, record, regex, text, unstructured
[horizontal]
*Input Requirement* (Требования к вводу данных):

[horizontal]
*Supports Sensitive Dynamic* (Поддержка динамически изменяемых параметров, которые могут содержать конфиденциальную информацию):
 False (Нет) 



== Properties (Свойства)


.*Schema-Access-Strategy*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Access Strategy (Стратегия доступа к схеме)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает, как получить схему для интерпретации данных.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* Использовать строковые поля из выражения Grok (Use String Fields From Grok Expression): Схема будет получена с использованием имен полей, присутствующих во всех настроенных выражениях Grok. Все поля схемы будут иметь тип String и будут отмечены как nullable. Схема также включит поле `stackTrace` и поле `_raw`, содержащее входная строка. 

* Использовать свойство 'Имя схемы' (Use 'Schema Name' Property): Имя используемой схемы указывается свойством 'Имя схемы'. Значение этого свойства используется для поиска схемы в настроенном сервисе реестра схем. 

* Использовать свойство 'Текст схемы' (Use 'Schema Text' Property): Сам текст схемы указывается свойством 'Текст схемы'. Значение этого свойства должно быть допустимой Avro схемой. Если используется язык выражений, значение свойства 'Текст схемы' должно быть действительным после замены выражений. 

* Читатель ссылки на схему (Schema Reference Reader): Информация о ссылке на схему будет предоставлена через реализованный сервис конфигурации Schema Reference Reader. 


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Schema-Registry
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Registry (Реестър на схеми)

[horizontal]
*DESCRIPTION (Описание):*:: Определя контролера за услуга, който да се използва за реестра на схемите


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Schema-Name
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Name (Схема имени)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает имя схемы для поиска в свойстве Реестра схем


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Schema-Version
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Version (Схема версии)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает версию схемы для поиска в Реестре схем. Если не указано, будет получена последняя версия схемы.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Schema-Branch
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Branch (Схема ветки)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает имя ветки, которую следует использовать при поиске схемы в свойстве Схемарегистр. Если выбранная Схемарегистр не поддерживает ветвление, это значение будет проигнорировано.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.Schema-Text
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Text (Схема текста)

[horizontal]
*DESCRIPTION (Описание):*:: Текст Avro-формамата схемы


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables and FlowFile Attributes (Переменные среды и атрибуты FlowFile)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.*Schema-Reference-Reader*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Schema Reference Reader (Ссылочный читатель схемы)

[horizontal]
*DESCRIPTION (Описание):*:: Сервис реализации, отвечающий за чтение атрибутов или содержимого FlowFile для определения идентификатора ссылки на схему


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.Grok Pattern File
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Grok Patterns (Шаблоны Grok)

[horizontal]
*DESCRIPTION (Описание):*:: Шаблоны Grok для анализа журналов. Если не указаны, будет использован встроенный файл по умолчанию. Если указаны, все указанные шаблоны переопределят шаблоны по умолчанию. См. дополнительные сведения о Controller Service для списка предопределенных шаблонов.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Environment variables defined at JVM level and system properties (Переменные окружения, определенные на уровне JVM и системных свойств)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  False (Нет) 
************************************************
.*Grok Expression*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: Grok Expressions (Выражение для Grok)

[horizontal]
*DESCRIPTION (Описание):*:: Указывает формат строки журнала в формате Grok. Это позволяет чтению записей понимать, как парсить каждую строку журнала. Свойство поддерживает одно или несколько выражений Grok. Читатель пытается проанализировать входные строки в соответствии с конфигурацией порядка выражений. Если строка в журнале не соответствует ни одному из выражений, строка будет предполагаться принадлежащей предыдущему сообщению журнала.Если другие шаблоны Grok используются этим выражением, они должны быть предоставлены в свойстве файла шаблонов Grok.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************
.*No-Match-Behavior*
************************************************
[horizontal]
*DISPLAY NAME (Отображаемое наименование):*:: No Match Behavior (Поведение без совпадения)

[horizontal]
*DESCRIPTION (Описание):*:: Если встречается строка текста, которая не соответствует заданному выражению Grok и не является частью трассировки стека, это свойство указывает, как должна обрабатываться данная строка.


[horizontal]
*EXPRESSION LANGUAGE SCOPE (Область видимости языка выражений):*:: Not Supported (Не поддерживается)
[horizontal]
*SENSITIVE (Содержит конфиденциальные данные):*::  False (Нет) 

[horizontal]
*ALLOWABLE VALUES (Допустимые значения):*::

* Append to Previous Message (Добавить к предыдущему сообщению): Строка текста, которая не соответствует выражению Grok, будет добавлена в последнее поле предыдущего сообщения. 

* Skip Line (Пропустить строку): Строка текста, которая не соответствует выражению Grok, будет пропущена. 

* Raw Line (Сырая строка): Строка текста, которая не соответствует выражению Grok, будет добавлена только в поле _raw. 


[horizontal]
*REQUIRED (Обязательный параметр):*::  True (Да) 
************************************************








=== Ограничения

[cols="1a,2a",options="header",]
|===
|Требуемые права |Объяснение

|
|Шаблоны и выражения могут ссылаться на ресурсы по протоколу HTTP

|===







=== Writes Attributes (Записываемые атрибуты)

[cols="1a,2a",options="header",]
|===
|Наименование |Описание

|`amqp$appId`
|Поле идентификатора приложения из AMQP Message

|===







